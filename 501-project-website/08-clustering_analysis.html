<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>

    <meta charset="utf-8">
    <meta name="generator" content="quarto-1.2.247">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

    <meta name="author" content="Haoxuan(Will) Weng">

    <title>unsupervised-learning</title>
    <link rel="stylesheet" href="./project.css">
    <style>
        code {
            white-space: pre-wrap;
        }
        
        span.smallcaps {
            font-variant: small-caps;
        }
        
        div.columns {
            display: flex;
            gap: min(4vw, 1.5em);
        }
        
        div.column {
            flex: auto;
            overflow-x: auto;
        }
        
        div.hanging-indent {
            margin-left: 1.5em;
            text-indent: -1.5em;
        }
        
        ul.task-list {
            list-style: none;
        }
        
        ul.task-list li input[type="checkbox"] {
            width: 0.8em;
            margin: 0 0.8em 0.2em -1.6em;
            vertical-align: middle;
        }
        
        pre>code.sourceCode {
            white-space: pre;
            position: relative;
        }
        
        pre>code.sourceCode>span {
            display: inline-block;
            line-height: 1.25;
        }
        
        pre>code.sourceCode>span:empty {
            height: 1.2em;
        }
        
        .sourceCode {
            overflow: visible;
        }
        
        code.sourceCode>span {
            color: inherit;
            text-decoration: inherit;
        }
        
        div.sourceCode {
            margin: 1em 0;
        }
        
        pre.sourceCode {
            margin: 0;
        }
        
        @media screen {
            div.sourceCode {
                overflow: auto;
            }
        }
        
        @media print {
            pre>code.sourceCode {
                white-space: pre-wrap;
            }
            pre>code.sourceCode>span {
                text-indent: -5em;
                padding-left: 5em;
            }
        }
        
        pre.numberSource code {
            counter-reset: source-line 0;
        }
        
        pre.numberSource code>span {
            position: relative;
            left: -4em;
            counter-increment: source-line;
        }
        
        pre.numberSource code>span>a:first-child::before {
            content: counter(source-line);
            position: relative;
            left: -1em;
            text-align: right;
            vertical-align: baseline;
            border: none;
            display: inline-block;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            padding: 0 4px;
            width: 4em;
            color: #aaaaaa;
        }
        
        pre.numberSource {
            margin-left: 3em;
            border-left: 1px solid #aaaaaa;
            padding-left: 4px;
        }
        
        div.sourceCode {}
        
        @media screen {
            pre>code.sourceCode>span>a:first-child::before {
                text-decoration: underline;
            }
        }
        
        code span.al {
            color: #ff0000;
            font-weight: bold;
        }
        /* Alert */
        
        code span.an {
            color: #60a0b0;
            font-weight: bold;
            font-style: italic;
        }
        /* Annotation */
        
        code span.at {
            color: #7d9029;
        }
        /* Attribute */
        
        code span.bn {
            color: #40a070;
        }
        /* BaseN */
        
        code span.bu {
            color: #008000;
        }
        /* BuiltIn */
        
        code span.cf {
            color: #007020;
            font-weight: bold;
        }
        /* ControlFlow */
        
        code span.ch {
            color: #4070a0;
        }
        /* Char */
        
        code span.cn {
            color: #880000;
        }
        /* Constant */
        
        code span.co {
            color: #60a0b0;
            font-style: italic;
        }
        /* Comment */
        
        code span.cv {
            color: #60a0b0;
            font-weight: bold;
            font-style: italic;
        }
        /* CommentVar */
        
        code span.do {
            color: #ba2121;
            font-style: italic;
        }
        /* Documentation */
        
        code span.dt {
            color: #902000;
        }
        /* DataType */
        
        code span.dv {
            color: #40a070;
        }
        /* DecVal */
        
        code span.er {
            color: #ff0000;
            font-weight: bold;
        }
        /* Error */
        
        code span.ex {}
        /* Extension */
        
        code span.fl {
            color: #40a070;
        }
        /* Float */
        
        code span.fu {
            color: #06287e;
        }
        /* Function */
        
        code span.im {
            color: #008000;
            font-weight: bold;
        }
        /* Import */
        
        code span.in {
            color: #60a0b0;
            font-weight: bold;
            font-style: italic;
        }
        /* Information */
        
        code span.kw {
            color: #007020;
            font-weight: bold;
        }
        /* Keyword */
        
        code span.op {
            color: #666666;
        }
        /* Operator */
        
        code span.ot {
            color: #007020;
        }
        /* Other */
        
        code span.pp {
            color: #bc7a00;
        }
        /* Preprocessor */
        
        code span.sc {
            color: #4070a0;
        }
        /* SpecialChar */
        
        code span.ss {
            color: #bb6688;
        }
        /* SpecialString */
        
        code span.st {
            color: #4070a0;
        }
        /* String */
        
        code span.va {
            color: #19177c;
        }
        /* Variable */
        
        code span.vs {
            color: #4070a0;
        }
        /* VerbatimString */
        
        code span.wa {
            color: #60a0b0;
            font-weight: bold;
            font-style: italic;
        }
        /* Warning */
    </style>


    <script src="unsupervised-learning_files/libs/clipboard/clipboard.min.js"></script>
    <script src="unsupervised-learning_files/libs/quarto-html/quarto.js"></script>
    <script src="unsupervised-learning_files/libs/quarto-html/popper.min.js"></script>
    <script src="unsupervised-learning_files/libs/quarto-html/tippy.umd.min.js"></script>
    <script src="unsupervised-learning_files/libs/quarto-html/anchor.min.js"></script>
    <link href="unsupervised-learning_files/libs/quarto-html/tippy.css" rel="stylesheet">
    <link href="unsupervised-learning_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
    <script src="unsupervised-learning_files/libs/bootstrap/bootstrap.min.js"></script>
    <link href="unsupervised-learning_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
    <link href="unsupervised-learning_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
    <script type="application/javascript">
        define('jquery', [], function() {
            return window.jQuery;
        })
    </script>


</head>

<body>
    <header>
        <div class="su-brand-bar su-brand-bar--default">
            <div class="header-container">
                <div class="header-leftside">
                    <a class="su-brand-bar__logo" href="https://www.georgetown.edu/">Georgetown University</a>
                </div>

                <div class="header-rightside">
                    <a class="su-brand-bar__logo" href="http://haoxuan-weng.georgetown.domains/501-project-website/index.html">
            Home
        </a>
                    <a class="su-brand-bar__logo code" href="https://github.com/anly501/anly-501-project-Willinus-xuan">
            Code
        </a>
                    <a class="su-brand-bar__logo code" href="https://github.com/anly501/anly-501-project-Willinus-xuan">
            Data
        </a>
                </div>
            </div>
        </div>
    </header>

    <section class="banner">
        <div class="content-container">
            <div class='research-name'>
                <h1>
                    Automatic Cyberbulleying detect
                </h1>
            </div>
            <div class="subject">
                ANLY 501 Data Science and Analytics
            </div>
        </div>
    </section>

    <section class="wrapper">
        <div style="position:sticky;top: 300px;float: left;max-width: 25%;">
            <nav class="bx--tableofcontents__desktop" data-autoid="dds--tableofcontents__desktop">
                <ul>
                    <li class="bx--tableofcontents__desktop__item"><a href="http://haoxuan-weng.georgetown.domains/501-project-website/01-introduction.html">About this project</a></li>
                    <li class="bx--tableofcontents__desktop__item bx--tableofcontents__desktop__item--active"><a href="http://haoxuan-weng.georgetown.domains/501-project-website/02-data_collection.html" aria-current="location">Data collection</a></li>
                    <li class="bx--tableofcontents__desktop__item"><a href="http://haoxuan-weng.georgetown.domains/501-project-website/03-data_cleaning.html">Data Cleaning</a></li>
                    <li class="bx--tableofcontents__desktop__item"><a href="http://haoxuan-weng.georgetown.domains/501-project-website/04-data_exploring.html">Exploring Data</a></li>
                    <li class="bx--tableofcontents__desktop__item"><a href="http://haoxuan-weng.georgetown.domains/501-project-website/05-Naive_Bayes.html">Naïve Bayes</a></li>
                    <li class="bx--tableofcontents__desktop__item"><a href="http://haoxuan-weng.georgetown.domains/501-project-website/06-Decision_tree.html">Decision Trees</a></li>
                    <li class="bx--tableofcontents__desktop__item"><a href="http://haoxuan-weng.georgetown.domains/501-project-website/07-svm.html">SVM</a></li>
                    <li class="bx--tableofcontents__desktop__item"><a href="http://haoxuan-weng.georgetown.domains/501-project-website/08-clustering_analysis.html">Clustering</a></li>
                    <li class="bx--tableofcontents__desktop__item"><a href="http://haoxuan-weng.georgetown.domains/501-project-website/09-network_analysis.html">ARM and Networking</a></li>
                    <li class="bx--tableofcontents__desktop__item"><a href="http://haoxuan-weng.georgetown.domains/501-project-website/10-conclusion.html">Conclusions</a></li>
                </ul>
            </nav>
        </div>
    </section>

    <div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
        <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
            <nav id="TOC" role="doc-toc" class="toc-active">
                <h2 id="toc-title">Table of contents</h2>

                <ul>
                    <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="toc-section-number">1</span>  Introduction</a></li>
                    <li><a href="#clustering-method" id="toc-clustering-method" class="nav-link" data-scroll-target="#clustering-method"><span class="toc-section-number">2</span>  Clustering Method</a></li>
                    <li><a href="#feature-engineering" id="toc-feature-engineering" class="nav-link" data-scroll-target="#feature-engineering"><span class="toc-section-number">3</span>  Feature Engineering</a></li>
                    <li><a href="#evaluation-method" id="toc-evaluation-method" class="nav-link" data-scroll-target="#evaluation-method"><span class="toc-section-number">4</span>  Evaluation Method</a>
                        <ul class="collapse">
                            <li><a href="#elbow-method" id="toc-elbow-method" class="nav-link" data-scroll-target="#elbow-method"><span class="toc-section-number">4.1</span>  Elbow Method</a></li>
                            <li><a href="#silhouette-score" id="toc-silhouette-score" class="nav-link" data-scroll-target="#silhouette-score"><span class="toc-section-number">4.2</span>  Silhouette Score</a></li>
                        </ul>
                    </li>
                    <li><a href="#k-means" id="toc-k-means" class="nav-link" data-scroll-target="#k-means"><span class="toc-section-number">5</span>  K-means ++</a></li>
                    <li><a href="#dbscan" id="toc-dbscan" class="nav-link" data-scroll-target="#dbscan"><span class="toc-section-number">6</span>  DBSCAN</a></li>
                    <li><a href="#agglomerative-clustering" id="toc-agglomerative-clustering" class="nav-link" data-scroll-target="#agglomerative-clustering"><span class="toc-section-number">7</span>  Agglomerative Clustering</a></li>
                    <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="toc-section-number">8</span>  Conclusion</a></li>
                    <li><a href="#reference" id="toc-reference" class="nav-link" data-scroll-target="#reference"><span class="toc-section-number">9</span>  Reference</a></li>
                </ul>
            </nav>
        </div>
        <main class="content" id="quarto-document-content">



            <section id="introduction" class="level1" data-number="1">
                <h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
                <p>The clustering methods are frequently applied in marketing fields. Marketing companies need unsupervised learning to find patterns behind the customer preferences.</p>
                <p>In this tab, three clustering methods will be used, namely, KMEANS++, DBSCAN,Agglomerative Clustering. These methods are selected from density clustering, Hierachical Clustering, Partitioning Method.</p>
                <p>The numbers of clusters are computed based on elbow method, Silhouette Score and empirical methods like plotting dendrogram. Principal Component Analysis is used to decompose the data into 2D to visualize.</p>
            </section>
            <section id="clustering-method" class="level1" data-number="2">
                <h1 data-number="2"><span class="header-section-number">2</span> Clustering Method</h1>
                <div class="cell" data-execution_count="1">
                    <details>
                        <summary>Code</summary>
                        <div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import the necessary packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.cluster <span class="im">import</span> DBSCAN</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.spatial.distance <span class="im">import</span> cdist</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">'ignore'</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.cluster <span class="im">import</span> KMeans</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> silhouette_score</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> scipy.cluster.hierarchy <span class="im">as</span> shc</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.decomposition <span class="im">import</span> PCA</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.cluster.hierarchy <span class="im">import</span> dendrogram,linkage</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.cluster <span class="im">import</span> AgglomerativeClustering</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
                    </details>
                </div>
                <div class="cell" data-execution_count="2">
                    <details>
                        <summary>Code</summary>
                        <div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read the csv file</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'../../data/hate_speech.csv'</span>,index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># only use the numerical data</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.loc[:,[<span class="st">'id'</span>,<span class="st">'follower_count'</span>,<span class="st">'friends_count'</span>,<span class="st">'retweet_count'</span>,<span class="st">'favorite_count'</span>,<span class="st">'word_length'</span>,<span class="st">'label'</span>]]</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>df.rename({<span class="st">'id'</span>:<span class="st">'timestamp'</span>},axis<span class="op">=</span><span class="dv">1</span>,inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
                    </details>
                    <div class="cell-output cell-output-display" data-execution_count="2">

                        <div>

                            <table class="dataframe table table-sm table-striped">
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th>timestamp</th>
                                        <th>follower_count</th>
                                        <th>friends_count</th>
                                        <th>retweet_count</th>
                                        <th>favorite_count</th>
                                        <th>word_length</th>
                                        <th>label</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th>0</th>
                                        <td>13857342</td>
                                        <td>20161</td>
                                        <td>780</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>10</td>
                                        <td>0</td>
                                    </tr>
                                    <tr>
                                        <th>1</th>
                                        <td>13857342</td>
                                        <td>20161</td>
                                        <td>780</td>
                                        <td>0</td>
                                        <td>4</td>
                                        <td>13</td>
                                        <td>0</td>
                                    </tr>
                                    <tr>
                                        <th>2</th>
                                        <td>82522377</td>
                                        <td>4</td>
                                        <td>64</td>
                                        <td>0</td>
                                        <td>1</td>
                                        <td>15</td>
                                        <td>1</td>
                                    </tr>
                                    <tr>
                                        <th>3</th>
                                        <td>13857342</td>
                                        <td>20161</td>
                                        <td>780</td>
                                        <td>1</td>
                                        <td>30</td>
                                        <td>11</td>
                                        <td>0</td>
                                    </tr>
                                    <tr>
                                        <th>4</th>
                                        <td>930620467</td>
                                        <td>18807</td>
                                        <td>263</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>11</td>
                                        <td>0</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
            <section id="feature-engineering" class="level1" data-number="3">
                <h1 data-number="3"><span class="header-section-number">3</span> Feature Engineering</h1>
                <div class="cell" data-execution_count="3">
                    <details>
                        <summary>Code</summary>
                        <div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> df.drop(columns<span class="op">=</span><span class="st">'label'</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df.label</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> StandardScaler()</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>x_scaled <span class="op">=</span> model.fit_transform(x)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>pca <span class="op">=</span> PCA(n_components <span class="op">=</span> <span class="dv">2</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>X_principal <span class="op">=</span> pca.fit_transform(x_scaled)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>X_principal <span class="op">=</span> pd.DataFrame(X_principal)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>X_principal.columns <span class="op">=</span> [<span class="st">'P1'</span>, <span class="st">'P2'</span>]</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> X_principal.values</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
                    </details>
                </div>
            </section>
            <section id="evaluation-method" class="level1" data-number="4">
                <h1 data-number="4"><span class="header-section-number">4</span> Evaluation Method</h1>
                <section id="elbow-method" class="level2" data-number="4.1">
                    <h2 data-number="4.1" class="anchored" data-anchor-id="elbow-method"><span class="header-section-number">4.1</span> Elbow Method</h2>
                    <div class="cell" data-execution_count="5">
                        <details>
                            <summary>Code</summary>
                            <div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># for k means clustering we will use the elbow method to find the optimal number of clusters. we will use the inertia_ attribute to find the sum of squared distances of samples to their closest cluster center. we will use the range of 1 to 10 clusters. plot the inertia_ values for each number of clusters. make sure to save it in a dataframe and plot it using matplotlib.</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>kmeans_kwargs <span class="op">=</span> {</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"init"</span>:<span class="st">"k-means++"</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"random_state"</span>:<span class="dv">42</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>sse <span class="op">=</span> []</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>distortions <span class="op">=</span> []</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,<span class="dv">11</span>):</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    kmeans <span class="op">=</span> KMeans(n_clusters<span class="op">=</span>i,<span class="op">**</span>kmeans_kwargs)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    kmeans.fit(x)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    sse.append(kmeans.inertia_)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    distortions.append(<span class="bu">sum</span>(np.<span class="bu">min</span>(cdist(x, kmeans.cluster_centers_,</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">'euclidean'</span>), axis<span class="op">=</span><span class="dv">1</span>)) <span class="op">/</span> x.shape[<span class="dv">0</span>])</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>evaluation <span class="op">=</span> pd.DataFrame.from_records({<span class="st">'cluster'</span>:np.arange(<span class="dv">1</span>,i<span class="op">+</span><span class="dv">1</span>),<span class="st">'Inertia'</span>:sse,<span class="st">'distortions'</span>:distortions})</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>X_principal.loc[:,<span class="st">'label'</span>] <span class="op">=</span> df.label</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>evaluation.plot.line(x <span class="op">=</span> <span class="st">'cluster'</span>,subplots<span class="op">=</span><span class="va">True</span>,title<span class="op">=</span><span class="st">'Elbow Method'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
                        </details>
                        <div class="cell-output cell-output-display" data-execution_count="5">

                            <div>

                                <table class="dataframe table table-sm table-striped">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th>Inertia</th>
                                            <th>cluster</th>
                                            <th>distortions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th>0</th>
                                            <td>8712.494712</td>
                                            <td>1</td>
                                            <td>1.142817</td>
                                        </tr>
                                        <tr>
                                            <th>1</th>
                                            <td>6087.019768</td>
                                            <td>2</td>
                                            <td>0.904794</td>
                                        </tr>
                                        <tr>
                                            <th>2</th>
                                            <td>4676.381476</td>
                                            <td>3</td>
                                            <td>0.893993</td>
                                        </tr>
                                        <tr>
                                            <th>3</th>
                                            <td>3434.406219</td>
                                            <td>4</td>
                                            <td>0.706254</td>
                                        </tr>
                                        <tr>
                                            <th>4</th>
                                            <td>2574.717059</td>
                                            <td>5</td>
                                            <td>0.649922</td>
                                        </tr>
                                        <tr>
                                            <th>5</th>
                                            <td>2086.901738</td>
                                            <td>6</td>
                                            <td>0.629156</td>
                                        </tr>
                                        <tr>
                                            <th>6</th>
                                            <td>1748.605447</td>
                                            <td>7</td>
                                            <td>0.546182</td>
                                        </tr>
                                        <tr>
                                            <th>7</th>
                                            <td>1497.128242</td>
                                            <td>8</td>
                                            <td>0.485381</td>
                                        </tr>
                                        <tr>
                                            <th>8</th>
                                            <td>1268.510072</td>
                                            <td>9</td>
                                            <td>0.448680</td>
                                        </tr>
                                        <tr>
                                            <th>9</th>
                                            <td>1140.034594</td>
                                            <td>10</td>
                                            <td>0.411454</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="silhouette-score" class="level2" data-number="4.2">
                    <h2 data-number="4.2" class="anchored" data-anchor-id="silhouette-score"><span class="header-section-number">4.2</span> Silhouette Score</h2>
                    <div class="cell">
                        <details>
                            <summary>Code</summary>
                            <div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>epsilon <span class="op">=</span> [<span class="fl">0.2</span>,<span class="fl">0.3</span>,<span class="fl">0.4</span>,<span class="fl">0.5</span>,<span class="fl">0.6</span>,<span class="fl">0.7</span>,<span class="fl">0.8</span>,<span class="fl">0.9</span>,<span class="dv">1</span>,<span class="fl">1.25</span>,<span class="fl">1.5</span>,<span class="fl">1.75</span>, <span class="dv">2</span>,<span class="fl">2.25</span>,<span class="fl">2.5</span>,<span class="fl">2.75</span>, <span class="dv">3</span>,<span class="fl">3.25</span>,<span class="fl">3.5</span>,<span class="fl">3.75</span>, <span class="dv">4</span>]</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>min_samples <span class="op">=</span> [<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>]</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>sil_avg <span class="op">=</span> []</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>max_value <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(epsilon)):</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(min_samples)):</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>        db <span class="op">=</span> DBSCAN(min_samples <span class="op">=</span> min_samples[j], eps <span class="op">=</span>epsilon[i]).fit(x)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>        <span class="co">#cluster_labels=dbscan.fit_predict(data) </span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>        core_samples_mask <span class="op">=</span> np.zeros_like(db.labels_, dtype<span class="op">=</span><span class="bu">bool</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>        core_samples_mask[db.core_sample_indices_] <span class="op">=</span> <span class="va">True</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>        labels <span class="op">=</span> db.labels_</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Number of clusters in labels, ignoring noise if present.</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>        n_clusters_ <span class="op">=</span> <span class="bu">len</span>(<span class="bu">set</span>(labels)) <span class="op">-</span> (<span class="dv">1</span> <span class="cf">if</span> <span class="op">-</span><span class="dv">1</span> <span class="kw">in</span> labels <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>        n_noise_ <span class="op">=</span> <span class="bu">list</span>(labels).count(<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>        silhouette_avg <span class="op">=</span> silhouette_score(x, labels)</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> silhouette_avg <span class="op">&gt;</span> max_value[<span class="dv">3</span>]:</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>            max_value<span class="op">=</span>(epsilon[i], min_samples[j], n_clusters_, silhouette_avg)</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>        sil_avg.append(silhouette_avg)</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"epsilon="</span>, max_value[<span class="dv">0</span>], </span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>      <span class="st">"</span><span class="ch">\n</span><span class="st">min_sample="</span>, max_value[<span class="dv">1</span>],</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>      <span class="st">"</span><span class="ch">\n</span><span class="st">number of clusters="</span>, max_value[<span class="dv">2</span>],</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>      <span class="st">"</span><span class="ch">\n</span><span class="st">average silhouette score= </span><span class="sc">%.4f</span><span class="st">"</span> <span class="op">%</span> max_value[<span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
                        </details>
                    </div>
                </section>
            </section>
            <section id="k-means" class="level1" data-number="5">
                <h1 data-number="5"><span class="header-section-number">5</span> K-means ++</h1>
                <div class="cell" data-execution_count="16">
                    <details>
                        <summary>Code</summary>
                        <div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>sns.set_theme(style<span class="op">=</span><span class="st">'whitegrid'</span>,palette<span class="op">=</span><span class="st">'Set2'</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>bestk <span class="op">=</span> KMeans(n_clusters<span class="op">=</span><span class="dv">4</span>,<span class="op">**</span>kmeans_kwargs)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>kmeans <span class="op">=</span> bestk.fit_predict(x)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>X_principal.loc[:,<span class="st">'kmeans'</span>] <span class="op">=</span> kmeans</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>fig,axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">2</span>,figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">4</span>),dpi<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(X_principal,x<span class="op">=</span><span class="st">'P1'</span>,y<span class="op">=</span><span class="st">'P2'</span>,hue<span class="op">=</span><span class="st">'kmeans'</span>,ax<span class="op">=</span>axes[<span class="dv">0</span>])</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(X_principal,x<span class="op">=</span><span class="st">'P1'</span>,y<span class="op">=</span><span class="st">'P2'</span>,hue <span class="op">=</span><span class="st">'label'</span>, ax<span class="op">=</span>axes[<span class="dv">1</span>])</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'True distribution'</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Kmeans'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
                    </details>
                    <div class="cell-output cell-output-display" data-execution_count="16">
                        <pre><code>Text(0.5, 1.0, 'Kmeans')</code></pre>
                    </div>
                    <div class="cell-output cell-output-display">
                        <p><img src="unsupervised-learning_files/figure-html/cell-7-output-2.png" class="img-fluid"></p>
                    </div>
                </div>
            </section>
            <section id="dbscan" class="level1" data-number="6">
                <h1 data-number="6"><span class="header-section-number">6</span> DBSCAN</h1>
                <div class="cell" data-execution_count="18">
                    <details>
                        <summary>Code</summary>
                        <div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># DBSCAN density clustering method</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># perform DBSCAN clustering. use the eps and min_samples parameters to find the optimal number of clusters. plot the number of clusters vs the silhouette score. Suggest the optimal number of clusters based on the plot.</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>DB <span class="op">=</span> DBSCAN(eps<span class="op">=</span><span class="fl">2.75</span>,min_samples<span class="op">=</span><span class="dv">10</span>).fit(x)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>DB_labels <span class="op">=</span> DB.labels_</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>X_principal.loc[:,<span class="st">'DB_labels'</span>] <span class="op">=</span> DB_labels</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>fig,axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">2</span>,figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">4</span>),dpi<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(X_principal,x<span class="op">=</span><span class="st">'P1'</span>,y<span class="op">=</span><span class="st">'P2'</span>,hue<span class="op">=</span><span class="st">'DB_labels'</span>,ax<span class="op">=</span>axes[<span class="dv">0</span>])</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(X_principal,x<span class="op">=</span><span class="st">'P1'</span>,y<span class="op">=</span><span class="st">'P2'</span>,hue <span class="op">=</span><span class="st">'label'</span>, ax<span class="op">=</span>axes[<span class="dv">1</span>])</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'True distribution'</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'DBSCAN'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
                    </details>
                    <div class="cell-output cell-output-display" data-execution_count="18">
                        <pre><code>Text(0.5, 1.0, 'DBSCAN')</code></pre>
                    </div>
                    <div class="cell-output cell-output-display">
                        <p><img src="unsupervised-learning_files/figure-html/cell-8-output-2.png" class="img-fluid"></p>
                    </div>
                </div>
            </section>
            <section id="agglomerative-clustering" class="level1" data-number="7">
                <h1 data-number="7"><span class="header-section-number">7</span> Agglomerative Clustering</h1>
                <div class="cell" data-execution_count="11">
                    <details>
                        <summary>Code</summary>
                        <div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>tree <span class="op">=</span> dendrogram(linkage(x, method<span class="op">=</span><span class="st">'ward'</span>))</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">25.5</span>,color <span class="op">=</span> <span class="st">'r'</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">38</span>,color <span class="op">=</span> <span class="st">'r'</span>,linestyle<span class="op">=</span><span class="st">'--'</span>,linewidth<span class="op">=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
                    </details>
                    <div class="cell-output cell-output-display" data-execution_count="11">
                        <pre><code>&lt;matplotlib.lines.Line2D at 0x2429ed7f6d0&gt;</code></pre>
                    </div>
                    <div class="cell-output cell-output-display">
                        <p><img src="unsupervised-learning_files/figure-html/cell-9-output-2.png" class="img-fluid"></p>
                    </div>
                </div>
                <div class="cell" data-execution_count="12">
                    <details>
                        <summary>Code</summary>
                        <div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>agg <span class="op">=</span> AgglomerativeClustering(n_clusters<span class="op">=</span><span class="dv">3</span>, affinity<span class="op">=</span><span class="st">'euclidean'</span>, linkage<span class="op">=</span><span class="st">'ward'</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>agg.fit(x)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> agg.labels_</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>X_principal.loc[:,<span class="st">'agglomerative'</span>] <span class="op">=</span> labels</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>fig,axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">2</span>,figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">4</span>),dpi<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(X_principal,x<span class="op">=</span><span class="st">'P1'</span>,y<span class="op">=</span><span class="st">'P2'</span>,hue<span class="op">=</span><span class="st">'agglomerative'</span>,ax<span class="op">=</span>axes[<span class="dv">0</span>])</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(X_principal,x<span class="op">=</span><span class="st">'P1'</span>,y<span class="op">=</span><span class="st">'P2'</span>,hue <span class="op">=</span><span class="st">'label'</span>, ax<span class="op">=</span>axes[<span class="dv">1</span>])</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'True distribution'</span>)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'AgglomerativeClustering'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
                    </details>
                    <div class="cell-output cell-output-display" data-execution_count="12">
                        <pre><code>Text(0.5, 1.0, 'AgglomerativeClustering')</code></pre>
                    </div>
                    <div class="cell-output cell-output-display">
                        <p><img src="unsupervised-learning_files/figure-html/cell-10-output-2.png" class="img-fluid"></p>
                    </div>
                </div>
            </section>
            <section id="conclusion" class="level1" data-number="8">
                <h1 data-number="8"><span class="header-section-number">8</span> Conclusion</h1>
                <p>In this tab, we have used three separate clustering model with the best hyperparameters to conduct unsupervised learning.</p>
                <p>The potential association underneath the dataset derived from the Unsupervised learning is hard to explanable sometimes especially once the data is normalized and decomposed into 2D.</p>
                <p>Among the three methods, the k-means cluters the whole dataset into 4 groups in terms of the six numerical variables as Followers counts, Favorite Counts, Retweet Counts, etc.</p>
                <p>One of the highlight worth mentioned is that the K-means++ method is the best among this three if evaluated by the true distribution of the y label. It can to some extent, be similar to the actual cyberviolence distribution in the text.
                    However, how the distribution of the 6 features vary and therefore influcing the prediction of hate speech is still unknown.</p>
            </section>
            <section id="reference" class="level1" data-number="9">
                <h1 data-number="9"><span class="header-section-number">9</span> Reference</h1>
                <p>[1] Shaik, J. (2020, September 18). Practical implementation of K-means, hierarchical, and DBSCAN clustering on dataset with… Medium. Retrieved November 13, 2022, from https://medium.com/analytics-vidhya/practical-implementation-of-k-means-hierarchical-and-dbscan-clustering-on-dataset-with-bd7f3d13ef7f</p>
                <p>[2] Prado, K. S. do. (2019, June 3). How DBSCAN works and why should we use it? Medium. Retrieved December 8, 2022, from https://medium.com/towards-data-science/how-dbscan-works-and-why-should-i-use-it-443b4a191c80</p>
                <p>[3] Baruah, I. D. (2021, July 21). Cheat sheet for implementing 7 methods for selecting the optimal number of clusters in Python. Medium. Retrieved December 8, 2022, from https://towardsdatascience.com/cheat-sheet-to-implementing-7-methods-for-selecting-optimal-number-of-clusters-in-python-898241e1d6ad</p>
            </section>

        </main>
        <!-- /main column -->
        <script id="quarto-html-after-body" type="application/javascript">
            window.document.addEventListener("DOMContentLoaded", function(event) {
                const toggleBodyColorMode = (bsSheetEl) => {
                    const mode = bsSheetEl.getAttribute("data-mode");
                    const bodyEl = window.document.querySelector("body");
                    if (mode === "dark") {
                        bodyEl.classList.add("quarto-dark");
                        bodyEl.classList.remove("quarto-light");
                    } else {
                        bodyEl.classList.add("quarto-light");
                        bodyEl.classList.remove("quarto-dark");
                    }
                }
                const toggleBodyColorPrimary = () => {
                    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
                    if (bsSheetEl) {
                        toggleBodyColorMode(bsSheetEl);
                    }
                }
                toggleBodyColorPrimary();
                const icon = "";
                const anchorJS = new window.AnchorJS();
                anchorJS.options = {
                    placement: 'right',
                    icon: icon
                };
                anchorJS.add('.anchored');
                const clipboard = new window.ClipboardJS('.code-copy-button', {
                    target: function(trigger) {
                        return trigger.previousElementSibling;
                    }
                });
                clipboard.on('success', function(e) {
                    // button target
                    const button = e.trigger;
                    // don't keep focus
                    button.blur();
                    // flash "checked"
                    button.classList.add('code-copy-button-checked');
                    var currentTitle = button.getAttribute("title");
                    button.setAttribute("title", "Copied!");
                    let tooltip;
                    if (window.bootstrap) {
                        button.setAttribute("data-bs-toggle", "tooltip");
                        button.setAttribute("data-bs-placement", "left");
                        button.setAttribute("data-bs-title", "Copied!");
                        tooltip = new bootstrap.Tooltip(button, {
                            trigger: "manual",
                            customClass: "code-copy-button-tooltip",
                            offset: [0, -8]
                        });
                        tooltip.show();
                    }
                    setTimeout(function() {
                        if (tooltip) {
                            tooltip.hide();
                            button.removeAttribute("data-bs-title");
                            button.removeAttribute("data-bs-toggle");
                            button.removeAttribute("data-bs-placement");
                        }
                        button.setAttribute("title", currentTitle);
                        button.classList.remove('code-copy-button-checked');
                    }, 1000);
                    // clear code selection
                    e.clearSelection();
                });
                const viewSource = window.document.getElementById('quarto-view-source') ||
                    window.document.getElementById('quarto-code-tools-source');
                if (viewSource) {
                    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
                    viewSource.addEventListener("click", function(e) {
                        if (sourceUrl) {
                            // rstudio viewer pane
                            if (/\bcapabilities=\b/.test(window.location)) {
                                window.open(sourceUrl);
                            } else {
                                window.location.href = sourceUrl;
                            }
                        } else {
                            const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
                            modal.show();
                        }
                        return false;
                    });
                }

                function toggleCodeHandler(show) {
                    return function(e) {
                        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
                        for (let i = 0; i < detailsSrc.length; i++) {
                            const details = detailsSrc[i].parentElement;
                            if (show) {
                                details.open = true;
                            } else {
                                details.removeAttribute("open");
                            }
                        }
                        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
                        const fromCls = show ? "hidden" : "unhidden";
                        const toCls = show ? "unhidden" : "hidden";
                        for (let i = 0; i < cellCodeDivs.length; i++) {
                            const codeDiv = cellCodeDivs[i];
                            if (codeDiv.classList.contains(fromCls)) {
                                codeDiv.classList.remove(fromCls);
                                codeDiv.classList.add(toCls);
                            }
                        }
                        return false;
                    }
                }
                const hideAllCode = window.document.getElementById("quarto-hide-all-code");
                if (hideAllCode) {
                    hideAllCode.addEventListener("click", toggleCodeHandler(false));
                }
                const showAllCode = window.document.getElementById("quarto-show-all-code");
                if (showAllCode) {
                    showAllCode.addEventListener("click", toggleCodeHandler(true));
                }

                function tippyHover(el, contentFn) {
                    const config = {
                        allowHTML: true,
                        content: contentFn,
                        maxWidth: 500,
                        delay: 100,
                        arrow: false,
                        appendTo: function(el) {
                            return el.parentElement;
                        },
                        interactive: true,
                        interactiveBorder: 10,
                        theme: 'quarto',
                        placement: 'bottom-start'
                    };
                    window.tippy(el, config);
                }
                const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
                for (var i = 0; i < noterefs.length; i++) {
                    const ref = noterefs[i];
                    tippyHover(ref, function() {
                        // use id or data attribute instead here
                        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
                        try {
                            href = new URL(href).hash;
                        } catch {}
                        const id = href.replace(/^#\/?/, "");
                        const note = window.document.getElementById(id);
                        return note.innerHTML;
                    });
                }
                const findCites = (el) => {
                    const parentEl = el.parentElement;
                    if (parentEl) {
                        const cites = parentEl.dataset.cites;
                        if (cites) {
                            return {
                                el,
                                cites: cites.split(' ')
                            };
                        } else {
                            return findCites(el.parentElement)
                        }
                    } else {
                        return undefined;
                    }
                };
                var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
                for (var i = 0; i < bibliorefs.length; i++) {
                    const ref = bibliorefs[i];
                    const citeInfo = findCites(ref);
                    if (citeInfo) {
                        tippyHover(citeInfo.el, function() {
                            var popup = window.document.createElement('div');
                            citeInfo.cites.forEach(function(cite) {
                                var citeDiv = window.document.createElement('div');
                                citeDiv.classList.add('hanging-indent');
                                citeDiv.classList.add('csl-entry');
                                var biblioDiv = window.document.getElementById('ref-' + cite);
                                if (biblioDiv) {
                                    citeDiv.innerHTML = biblioDiv.innerHTML;
                                }
                                popup.appendChild(citeDiv);
                            });
                            return popup.innerHTML;
                        });
                    }
                }
            });
        </script>

    </div>
    <footer id="footer">
        <div style="background-color:#313030; float: bottom;">
            <div style="height:50px;margin-top: 0px; vertical-align: middle;">
                <p style="color:	#8d8d8d; "> © 2022 Haoxuan Weng 501 Project, powered by GU domain </p>
            </div>
        </div>
    </footer>
    <!-- /content -->



</body>

</html>